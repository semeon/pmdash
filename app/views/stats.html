<div class="row" ng-controller="StatsCtrl">
  <div class="col-md-12">

    <div class="panel panel-default" ng-repeat="project in projects | orderBy:'title'">
      <div class="panel-heading header">PROJECT: {{project.title}}</div>

      <ul class="list-group"  ng-hide="project.hidden">
        <li class="list-group-item" 
            style="min-height: 45px;"
            ng-repeat="version in project.versions | orderBy:'due_date'">
          <div  class="header pull-left" 
                ng-class="{greyed:version.hidden}"
                style="height:35px;">
            <strong >Version: {{version.name}} / Due to: {{convertDueDate(version.due_date)}}</strong>
          </div>

          <div class="pull-left" ng-show="version.loadInProgress" style="margin-top: -1px; margin-left: 10px;">
            <img src="img/ajax-loader.gif"/>
          </div>

          <div class="btn-group pull-right">
            <button type="button" class="btn btn-primary btn-xs"
                    ng-click="versionReloadClick(project, version)"
                    ><span class="glyphicon glyphicon-refresh"></span></button>

            <button type="button" class="btn btn-primary btn-xs"
                    ng-click="versionHideClick(version)"
                    data-toggle="button"
                    >Hide version</button>

            <button type="button" class="btn btn-primary btn-xs" 
                    ng-click="versionExpandClick(version)"
                    data-toggle="button"
                    >Show trackers</button>

<!-- 
            <button type="button" class="btn btn-primary btn-xs"
                    ng-clickz="versionHideClick(version)"
                    ><span class="glyphicon glyphicon-fire"></span></button>
 -->




          </div>



          <table class="table table-condensed table-bordered" style="margin-top: 10px;" ng-hide="version.hidden">
            <thead> 
            </thead>
            <tbody>
              <tr>
                <th>Tracker</th>
                <th class="align-center" ng-repeat="status in project.customStatuses">{{status.title}}</th>
                <th class="align-center">Total</th>
              </tr>
              <tr ng-repeat="tracker in project.issueTrackers" ng-show="version.expanded">
                <td>{{getTrackerName(tracker)}}</td>
                <td class="align-center"
                  ng-class="{greyed:version.loadInProgress}" 
                  ng-repeat="status in project.customStatuses">
                    <a href="" 
                       ng-click="openIssuesGrid(version.name + ' / ' + 
                                                getTrackerName(tracker) +  ' / ' +
                                                status.title,
                                                version.getIssuesByCustomStatusAndTracker(status.title, tracker))"
                       >{{version.getCountByCustomStatusAndTracker(status.title, tracker)}}</a>

                </td>
                <td class="align-center"
                  ng-class="{greyed:version.loadInProgress}">
                    <a href="" 
                       ng-click="openIssuesGrid(version.name + ' / ' + 
                                                getTrackerName(tracker) +  ' / ' +
                                                'All Issues',
                                                version.getTrackerIssues(tracker))"
                       >{{version.getTrackerCount(tracker)}}</a>

                </td>
              </tr>
              <tr>
                <th>All Trackers</th>
                <td class="align-center"
                    ng-class="{greyed:version.loadInProgress}"
                    ng-repeat="status in project.customStatuses">

                    <a href="" 
                       ng-click="openIssuesGrid(version.name + ' / ' + 
                                                'All Trackers' +  ' / ' +
                                                status.title,
                                                version.getCustomStatusIssues(status.title))"
                       >{{version.getCustomStatusCount(status.title)}}</a>


                </td>
                <td class="align-center"
                    ng-class="{greyed:version.loadInProgress}">
                    <a href="" 
                       ng-click="openIssuesGrid(version.name + ' / ' + 
                                                'All Trackers' +  ' / ' +
                                                'All Issues', 
                                                version.issues)"
                       >{{version.issues.length}}</a>
                </td>
              </tr>                  
            </tbody>
          </table>



        </li>
      </ul>

    </div>

    


  </div>
</div>




